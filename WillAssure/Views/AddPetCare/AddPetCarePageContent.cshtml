@model WillAssure.Models.PetCareModel
@{
    /**/

    ViewBag.Title = "AddPetCarePageContent";
}

<style>
    ul#menu li {
        display: inline;
    }
</style>


@*Main Content*@
<div class="content-wrapper">
    <div class="container-fluid">

        <div class="row pt-2 pb-2">

            <div class="col-sm-3">
                <div class="btn-group float-sm-right">

                    <div class="dropdown-menu">
                        <a href="javaScript:void();" class="dropdown-item">Action</a>
                        <a href="javaScript:void();" class="dropdown-item">Another action</a>
                        <a href="javaScript:void();" class="dropdown-item">Something else here</a>
                        <div class="dropdown-divider"></div>
                        <a href="javaScript:void();" class="dropdown-item">Separated link</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Breadcrumb-->
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-body">


                        @if (Session["doctype"] != null)
                        {
                            if (Session["doctype"].ToString() != "")
                            {
                                <h5 style="float:right; color:#199d4b;">DocumentType  : <span class="icon-doc" style="color:#199d4b;"><b>@Session["doctype"].ToString()</b></span> </h5>
                            }
                        }
                        else
                        {
                            if (!Response.IsRequestBeingRedirected)
                            {
                                Response.Redirect("/LoginPage/LoginPageIndex");
                            }
                        }

                        <h5>
                            <ul id="menu" style="font-weight:bold;">

                                <a href="@Url.Action("UpdateTestatorsIndex","UpdateTestators" , new { NestId = Convert.ToInt32(Session["uuid"]) })"><li style="color:black;">Testator></li></a>
                                <a href="@Url.Action("AddTestatorFamilyIndex","AddTestatorFamily")"><li style="color:black;">Testator Family ></li></a>
                                <a href="@Url.Action("AddBeneficiaryInstituteIndex","AddBeneficiaryInstitute")">
                                    <li style="color:black;">Institution ></li>
                                </a>
                                <a href="@Url.Action("AddBeneficiaryIndex","AddBeneficiary")"><li style="color:black;">Beneficiary ></li></a>
                                <a href="@Url.Action("AddMainAssetsIndex","AddMainAssets")"><li style="color:black;">AssetInformation ></li></a>
                                <a href="@Url.Action("AddLiabilitiesIndex","AddLiabilities")"><li style="color:black;">Liabilites></li></a>
                                <a href="@Url.Action("AddPetCareIndex","AddPetCare")"><li style="color:">PetCare ></li></a>
                                <li style="color:#e1e1e1">Mapping ></li>
                                @*<li style="color:#e1e1e1">Nominee ></li>*@
                                <li style="color:#e1e1e1">Executor > </li>
                                <li style="color:#e1e1e1">Witness > </li>
                                <li style="color:#e1e1e1">Document</li>

                            </ul>
                        </h5>






                        <div class="row">

                            <div class="col-sm-5" id="btneditmsg" style="display:none;"> <div class="card-title text-primary"> <h6 style="color:darkred">( You Can Now Update Testator Family Details )</h6></div></div>
                        </div>



                        @using (Html.BeginForm("InsertPetcaredata", null, FormMethod.Post, new { id = "RoleForm" }))
                        {

                            @Html.HiddenFor(m => m.petid);
                            <div class="row">
                                <div class='col-sm-1'><label for='input-1' style="line-height:40px;"><i class="fa fa-user-circle-o  " aria-hidden="true"></i>Testator</label></div>
                                <div class="col-sm-3">

                                    <input type="text" readonly="true" name="ddltestatorname" class="form-control" value="@Session["disttestator"].ToString()" />
                                    <input type="hidden" name="ddltid" value="@Session["distid"].ToString()" />


                                </div>
                                <div class="col-sm-6"><button type="button" style="display:none;" id="btnfieldedit" class="btn btn-primary shadow-primary px-5">Enable Details</button><button type="button" style="display:none;" id="btnfieldedit1" class="btn btn-primary shadow-primary px-5">Disable Details</button><a href="@Url.Action("EditPetCareIndex","EditPetCare")">&nbsp;&nbsp;<input type="button" id="btnview" name="name" value="View" class="btn btn-success" /></a></div>
                            </div>
                            <hr />
                            <div class="row">
                                <div class="col-sm-6">
                                    @Html.HiddenFor(m => m.petid)
                                    <div class="form-group">
                                        <label for="input-1">Pet Name</label>

                                        @Html.TextBoxFor(m => m.petname, new { @class = "form-control input-shadow validate[required,custom[characteronly]] text-input", @id = "txtpetname", @placeholder = "Enter Pet Name", @autocomplete = "off", alert = "LabourCost is requried" })
                                    </div>
                                </div>



                                <div class="col-sm-6">

                                    <div class="form-group">
                                        <label for="input-1">Pet Age</label>

                                        @Html.TextBoxFor(m => m.petage, new { @class = "form-control input-shadow validate[required,custom[number]] text-input", @id = "txtpetage", @placeholder = "Enter Pet Age", @autocomplete = "off", alert = "LabourCost is requried" })
                                    </div>
                                </div>



                                <div class="col-sm-6">

                                    <div class="form-group">
                                        <label for="input-1">Type Of Pet</label>

                                        @Html.TextBoxFor(m => m.typeofpet, new { @class = "form-control input-shadow validate[required,custom[characteronly]] text-input", @id = "txttypeofpet", @placeholder = "Enter Type Of Pet", @autocomplete = "off", alert = "LabourCost is requried" })
                                    </div>
                                </div>


                                <div class="col-sm-6">

                                    <div class="form-group">
                                        <label for="input-1">Amount For Pet</label>

                                        @Html.TextBoxFor(m => m.amtforpet, new { @class = "form-control input-shadow validate[required,custom[number]] text-input", @id = "txtamtforpet", @placeholder = "Enter Amount For Pet", @autocomplete = "off", alert = "LabourCost is requried" })
                                    </div>
                                </div>



                                @*<div class="col-sm-6">

                    <div class="form-group">
                        <label for="input-1">Amount From Which Asset</label>

                        @Html.DropDownListFor(x => x.amtfromwhichasset, new SelectListItem[]{
                     new SelectListItem() {Text = "--Select--", Value=""},
                    new SelectListItem() {Text = "Finacial Assets", Value="Finacial Assets"},
                    new SelectListItem() {Text = "Non Financial  Assets", Value="Non Financial  Assets"}}, new { @class = "form-control input-shadow validate[required]" , @id="ddlmaritalstatus" })

                    </div>
                </div>*@



                                <div class="col-sm-6">

                                    <div class="form-group">
                                        <label for="input-1">Responsible Person For Pet</label>

                                        @Html.TextBoxFor(m => m.responsibelpersonforpet, new { @class = "form-control input-shadow validate[required,custom[characteronly]] text-input", @id = "txtresponsiblepet", @placeholder = "Enter Responsible Person For Pet", @autocomplete = "off", alert = "LabourCost is requried" })
                                    </div>
                                </div>




                            </div>

                            <hr />
                            <center> <h5>Mapping</h5></center>
                            <div class="row">


                                @if (Model.assettypetext != null)
                                {
                                    <div class="col-sm-6">

                                        <div class="form-group">
                                            <label for="input-1">Asset Type</label>



                                            <select id="ddlAssetType" class="form-control input-shadow validate[required]">
                                                <option value="">@Model.assettypetext</option>
                                            </select>
                                            @Html.HiddenFor(m => m.assettypeid, new { id = "assettypeid" })
                                            @Html.HiddenFor(m => m.assettypetext, new { id = "assettypetext" })
                                        </div>
                                    </div>
                                }
                                else
                                {
                                    <div class="col-sm-6">

                                        <div class="form-group">
                                            <label for="input-1">Asset Type</label>



                                            <select id="ddlAssetType" class="form-control input-shadow validate[required]">
                                                <option value="">--Select--</option>
                                            </select>
                                            @Html.HiddenFor(m => m.assettypeid, new { id = "assettypeid" })
                                            @Html.HiddenFor(m => m.assettypetext, new { id = "assettypetext" })
                                        </div>
                                    </div>
                                }





                                @if (Model.assetCategorytext != null)
                                {
                                    <div class="col-sm-6">

                                        <div class="form-group">
                                            <label for="input-1">Asset Category</label>

                                            <select id="ddlAssetCategory" class="form-control input-shadow validate[required]">
                                                <option value="">@Model.assetCategorytext</option>
                                            </select>
                                            @Html.HiddenFor(m => m.assetCategoryid, new { id = "assetCategoryid" })
                                            @Html.HiddenFor(m => m.assetCategorytext, new { id = "assetCategorytext" })
                                            @Html.HiddenFor(m => m.amId, new { id = "amid" })
                                        </div>
                                    </div>
                                }
                                else
                                {
                                    <div class="col-sm-6">

                                        <div class="form-group">
                                            <label for="input-1">Asset Category</label>

                                            <select id="ddlAssetCategory" class="form-control input-shadow validate[required]">
                                                <option value="">--Select--</option>
                                            </select>
                                            @Html.HiddenFor(m => m.assetCategoryid, new { id = "assetCategoryid" })
                                            @Html.HiddenFor(m => m.assetCategorytext, new { id = "assetCategorytext" })
                                            @Html.HiddenFor(m => m.amId, new { id = "amid" })
                                        </div>
                                    </div>
                                }






                                <div class="col-sm-6">

                                    <div class="form-group">
                                        <label for="input-1">Proportion</label>

                                        @Html.TextBoxFor(m => m.Proportion, new { @class = "form-control input-shadow  text-input", @id = "txtDetails", @placeholder = "Enter Proportion", @onblur = "validateproportion(this.value)", @autocomplete = "off", alert = "LabourCost is requried" })
                                    </div>
                                </div>

                            </div>



                            <div class="form-group" style="float:right">

                                <button type="submit" id="btnpetsubmit" class="btn btn-primary shadow-primary px-5"><i class="icon-lock"></i> Add Pet</button>
                                <button type="submit" id="btnupdate" style="display:none;" formaction="UpdatePetcare" class="btn btn-success shadow-primary px-5"><i class="icon-lock"></i>Update</button>
                                <a href="@Url.Action("AddAssetMappingIndex","AddAssetMapping")"><button type="button" id="btnnext" style="display:" class="btn btn-danger shadow-primary px-5">Skip&nbsp;&nbsp;<i class="icon-arrow-right-circle"></i></button></a>
                            </div>

                        }
                    </div>
                </div>
            </div>
            <button type="button" id="btnRoleformsubmitSUCCESS" style="display:none;" class="btnpopup btn btn-primary shadow-primary px-5"><i class="icon-lock"></i></button>
            <button type="button" id="btncheckpetcare" style="display:none;" class="btnpopup btn btn-primary shadow-primary px-5"><i class="icon-lock"></i></button>
            @*<button type="button" style="display:none" id="confirmtestatorfamily"></button>*@
        </div>


    </div>


</div>
@*end*@

<!--Start Back To Top Button-->
<a href="javaScript:void();" class="back-to-top"><i class="fa fa-angle-double-up"></i> </a>
<!--End Back To Top Button-->




<script>
    $(document).ready(function () {
        $("#RoleForm").validationEngine();

        $("#confirmtestatorfamily").on("click", function () { });

        $("#confirmtestatorfamily").click();
    });




          $.ajax({

            type: "POST",
            url:"@Url.Action("BindTestatorDDL", "AddPetCare")",
                  success: function (data) {
                      var splitted = data.split("~");
                      $("#DDLTestator").append(splitted[0]);
                      $("#ddltid").val(splitted[1]);
                      var pop = splitted[2];
                      //$('#DDLTestator').append(data);
                      if (pop == "true") {

                          $("#confirmtestatorfamily").on("click", function () { });

                          $("#confirmtestatorfamily").click(); //trigger event after listening to it.
                      }



            }
    });



        function getDDLTestator(value) {
        //var value = $(this).children(":selected").attr("value");
        var text = $("#DDLTestator option:selected").html();





        $("#ddltestatorname").val(text);
        $("#ddltid").val(value);
        var checkstatus =  $("#txtcheck").val();

             $.ajax({

            type: "POST",
            url:"@Url.Action("CheckTestatorUsers", "AddPetCare")",
                 data: { value: value, checkstatus: checkstatus },
            success: function (data) {

                if (data == 2) {

                    $("#btncheckExists").on("click", function () { });

                    $("#btncheckExists").click(); //trigger event after listening to it.


                    setTimeout(function () {
                        var url = "/AddBeneficiary/AddBeneficiaryIndex/";
                        window.location.href = url;
                    }, 2000);
                    //var url = "/AddBeneficiary/AddBeneficiaryIndex/";
                    //window.location.href = url;
                }







            }
        });





    };


</script>





@if (ViewBag.Message == "Duplicate")
{
    <script>

        $(document).ready(function () {


            $("#btnRoleformsubmitCHECK").on("click", function () { });

            $("#btnRoleformsubmitCHECK").click(); //trigger event after listening to it.




        });
    </script>

}


@if (ViewBag.Message == "Verified")
{
    <script>

        $(document).ready(function () {


            $("#btnRoleformsubmitSUCCESS").on("click", function () { });

            $("#btnRoleformsubmitSUCCESS").click(); //trigger event after listening to it.

            $("#txtRole").val("");


        });
    </script>

}






<script>
    $(document).ready(function () {

         $.ajax({

            type: "POST",
            url: "@Url.Action("BindAssetTypeDDL", "AddPetCare")",
            success: function (data) {

                $('#ddlAssetType').append(data);
            }



        });

    });

          $("#ddlAssetType").change(function () {
        var value = $(this).children(":selected").attr("value");
        var text = $("#ddlAssetType option:selected").html();

        $("#assettypetext").val(text);
        $("#assettypeid").val(value);


        $.ajax({

            type: "POST",
            url: "@Url.Action("BindAssetCategoryDDL", "AddPetCare")",
            data: { "send": "" + value+  ""},
            success: function (data) {

                $('#ddlAssetCategory').empty().append('<option value="0">--Select--</option>'+data);
            }



        });








    });



    $("#ddlAssetCategory").change(function () {
        var value = $(this).children(":selected").attr("value");
        var text = $("#ddlAssetCategory option:selected").html();

        $("#assetCategorytext").val(text);
        $("#assetCategoryid").val(value);
        $("#amid").val(value);



    });

</script>


<script>
    $(document).ready(function () {
        $("#RoleForm").validationEngine();
    });


</script>







<script>

    function validateproportion(value) {

        var data = value + "~" + $("#assetCategorytext").val();

        $.ajax({

            type: "POST",
            url: "@Url.Action("FilterProporion", "AddPetCare")",
            data: { "send": "" + data+  ""},
            success: function (data) {
                //alert(data);
                if (data == "true") {
                    $("#btncheckpetcare").on("click", function () { });

                    $("#btncheckpetcare").click(); //trigger event after listening to it.
                }


            }



        });



    }


</script>






<script>
    $("#confirmtestatorfamily").click(function () {
        $("#btnnext").show();
        swal({

            text: 'Do You Like To Add Petcare!',
            icon: 'warning',
            buttons: true,
            dangerMode: true,
            buttons: ['No', 'Yes']
        })
            .then((willDelete) => {
                if (willDelete) {



                } else {





                    var url = "/AddAssetMapping/AddAssetMappingIndex/";
                    window.location.href = url;




                }
            });

    });


</script>





@if (ViewBag.disablefield == "true")
{
    <script>



        $("#btnfieldedit").show();

        





        $(document).ready(function () {

            $("#txtpetname").attr("disabled", "disabled");
            $("#txtpetage").attr("disabled", "disabled");
            $("#txttypeofpet").attr("disabled", "disabled");
            $("#txtamtforpet").attr("disabled", "disabled");
            $("#ddlmaritalstatus").attr("disabled", "disabled");
            $("#txtresponsiblepet").attr("disabled", "disabled");
            $("#ddlAssetType").attr("disabled", "disabled");
            $("#ddlAssetCategory").attr("disabled", "disabled");
            $("#txtDetails").attr("disabled", "disabled");
           

        });


    </script>
}








<script>


    $("#btnfieldedit").click(function () {

        $("#btnfieldedit1").show();
        $("#btnfieldedit").hide();
        $("#btneditmsg").show();
        $("#btnupdate").show();


        $("#txtpetname").removeAttr("disabled");
        $("#txtpetage").removeAttr("disabled");
        $("#txttypeofpet").removeAttr("disabled");
        $("#txtamtforpet").removeAttr("disabled");
        $("#ddlmaritalstatus").removeAttr("disabled");
        $("#txtresponsiblepet").removeAttr("disabled");
        $("#ddlAssetType").removeAttr("disabled");
        $("#ddlAssetCategory").removeAttr("disabled");
        $("#txtDetails").removeAttr("disabled");
       

        $("#btnupdate").show();


        $("#btneditmsg").show();

    });





    $("#btnfieldedit1").click(function () {
        $("#btnfieldedit").show();
        $("#btnfieldedit1").hide();
        $("#btnupdate").hide();

        $("#btneditmsg").hide();



        $("#txtpetname").attr("disabled", "disabled");
            $("#txtpetage").attr("disabled", "disabled");
            $("#txttypeofpet").attr("disabled", "disabled");
            $("#txtamtforpet").attr("disabled", "disabled");
            $("#ddlmaritalstatus").attr("disabled", "disabled");
            $("#txtresponsiblepet").attr("disabled", "disabled");
            $("#ddlAssetType").attr("disabled", "disabled");
            $("#ddlAssetCategory").attr("disabled", "disabled");
            $("#txtDetails").attr("disabled", "disabled");
           

    });


</script>

