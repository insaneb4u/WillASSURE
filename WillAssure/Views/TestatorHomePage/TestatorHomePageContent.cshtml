﻿@model WillAssure.Models.TestatorFormModel
@{
    /**/

    ViewBag.Title = "TestatorHomePageContent";
}
<style>
    a:focus {
        color: #40a97b;
    }
</style>

<h6 class="text-uppercase">Vertical Nav Tabs</h6>
<hr>
<br />

<input type="hidden" name="name" id="test" value="@Session["documentamount"]" />

<div class="row">

    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3">
                        <div class="tabs-vertical tabs-vertical-dark">
                            <ul class="nav nav-tabs flex-column top-icon">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#tabe-25"><i class="icon-doc"></i> <span class="hidden-xs">Create Document</span></a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#tabe-26"><i class="icon-check"></i> <span class="hidden-xs">Completed Document</span></a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#tabe-27"><i class="icon-info"></i> <span class="hidden-xs">Incompleted Document</span></a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" id="rzp-button1"><i class="icon-badge"></i> <span class="hidden-xs">Payment</span></a>
                                </li>

                            </ul>
                        </div>
                    </div>
                    <div class="col-md-9">
                        <!-- Tab panes -->
                        <div class="tab-content">
                            <div id="tabe-25" class="container tab-pane active">

                                @using (Html.BeginForm(null, null, FormMethod.Post, new { name = "PopUp", id = "testatordocument" }))
                                {
                                    <textarea id="documenttype" name="documenttype" style="display:none;"></textarea>
                                    <div class="modal-body">
                                        @Html.HiddenFor(m => m.tId, new { @id = "tId" })

                                        <div class="row">

                                            <div class="col-sm-3">
                                                <label style="line-height:65px;">Document Type</label>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <br />
                                                    <label class="checkbox-inline">
                                                        <input type="radio" value="Will" class="checkone radio validate[required]" name="radio1">Will
                                                    </label>
                                                    <label class="checkbox-inline">
                                                        <input type="radio" value="Codocil" class="checktwo radio validate[required]" name="radio1">Codocil
                                                    </label>
                                                    <label class="checkbox-inline">
                                                        <input type="radio" value="LivingWill" class="checkfive radio validate[required]" name="radio1">Living Will
                                                    </label>
                                                    <label class="checkbox-inline">
                                                        <input type="checkbox" value="POA" class="checkthree radio validate[required]" name="radio1">POA
                                                    </label>
                                                    <label class="checkbox-inline">
                                                        <input type="checkbox" value="Giftdeeds" class="checkfour radio validate[required]" name="radio1">Giftdeeds
                                                    </label>


                                                    <br />
                                                    <span style="color:red;display:none;" id="documentmsg1">Please Complete Will Document First...!</span>
                                                    <span style="color:red;display:none;" id="documentmsg2">Please Complete Codocil Document First...!</span>
                                                    <span style="color:red;display:none;" id="documentmsg3">Please Complete LivingWill Document First...!</span>
                                                </div>
                                                @Html.HiddenFor(m => m.Document_Created_By_ID, new { id = "Document_Created_By_ID" })
                                                @Html.HiddenFor(m => m.Document_Created_By_txt, new { id = "Document_Created_By_txt" })
                                            </div>




                                        </div>
                                        <hr class="div_rd">




                                        <div class="form-group">
                                            <button type="submit" id="alert-success" formaction="insertDocumentDetails" class="btn btn-primary shadow-primary px-5 btnpop"><i class="icon-lock"></i>Submit</button>
                                        </div>
                                    </div>



                                }

                            </div>
                            <div id="tabe-26" class="container tab-pane fade">

                                @*@if (ViewBag.empty == "true")
                                    {*@
                                <center id="title"><h4 style="color:darkred;">Currently No Document Has Been Completed...!</h4></center>
                                @*}*@



                                <center>
                                    <a href="@Url.Action("Report.aspx", "page" , new { NestId = ViewBag.testatorid })" id="compdocumentbtn1" style="display:none;"><button type="button" class="btn btn-primary btn-round waves-effect waves-light m-1">Will</button></a>
                                    <a href="@Url.Action("Report.aspx","page", new { NestId = ViewBag.testatorid })" id="compdocumentbtn2" style="display:none;"> <button type="button" class="btn btn-success btn-round waves-effect waves-light m-1">POA</button></a>
                                    <a href="@Url.Action("Report.aspx","page", new { NestId = ViewBag.testatorid } )" id="compdocumentbtn3" style="display:none;"><button type="button" class="btn btn-info btn-round waves-effect waves-light m-1">Gift Deeds</button></a>
                                    <a href="@Url.Action("Report.aspx","page", new { NestId = ViewBag.testatorid })" id="compdocumentbtn4" style="display:none;"><button type="button" class="btn btn-danger btn-round waves-effect waves-light m-1">Living Will</button></a>
                                    <a href="@Url.Action("Report.aspx","page", new { NestId = ViewBag.testatorid })" id="compdocumentbtn5" style="display:none;"><button type="button" class="btn btn-warning btn-round waves-effect waves-light m-1">Codocil</button></a>
                                </center>




                            </div>



                            <div id="tabe-27" class="container tab-pane fade">
                                <center>
                                    <a href="@Url.Action("EnableDocumentLinks","DashBoard", new { doctype = "Will" })" id="documentbtn1" style="display:none;"><button type="button" class="btn btn-primary btn-round waves-effect waves-light m-1">Will</button></a>
                                    <a href="@Url.Action("CodocilIndex","Codocil")" id="documentbtn2" style="display:none;"> <button type="button" class="btn btn-success btn-round waves-effect waves-light m-1">Codocil</button></a>
                                    <a href="@Url.Action("EnableDocumentLinks","DashBoard", new { doctype = "POA" } )" id="documentbtn3" style="display:none;"><button type="button" class="btn btn-info btn-round waves-effect waves-light m-1">POA</button></a>
                                    <a href="@Url.Action("EnableDocumentLinks","DashBoard", new { doctype = "GiftDeeds" })" id="documentbtn4" style="display:none;"><button type="button" class="btn btn-danger btn-round waves-effect waves-light m-1">Gift Deeds</button></a>
                                    <a href="@Url.Action("LivingWillIndex","LivingWill", new { doctype = "LivingWill" })" id="documentbtn5" style="display:none;"><button type="button" class="btn btn-warning btn-round waves-effect waves-light m-1">Living Will</button></a>
                                </center>
                            </div>
                        </div>

                    </div>
                </div><!--End Row-->
            </div>
        </div>
    </div>
</div><!--End Row-->
@*payment integration script*@

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
    var v = parseInt($("#test").val()) * 100;

    var options = {
        "key": "rzp_test_GMBr5S3CwTimPr",
        "amount": "" + v + "", /// The amount is shown in currency subunits. Actual amount is ₹599.
        "name": "WillAssure",
        "order_id": "", // Pass the order ID if you are using Razorpay Orders.
        "currency": "INR", // Optional. Same as the Order currency
        "description": "Purchase Description",
        "image": "/assets/images/logo-icon.png",
        "handler": function (response) {
            //alert(response.razorpay_payment_id);
            $("#rzp-button1").hide();
            var url = "/Frontend/Makepayment";
            window.location.href = url;
        },
        "prefill": {
            "name": "Gaurav Kumar",
            "email": "test@test.com"
        },
        "notes": {
            "address": "Hello World"
        },
        "theme": {
            "color": "#F37254"
        }
    };
    var rzp1 = new Razorpay(options);

    document.getElementById('rzp-button1').onclick = function (e) {
        rzp1.open();
        e.preventDefault();


    }


    $("#btnpay").click(function () {

        $('#btnpay').dialog('close');
        return false;

    });

</script>


@if (ViewBag.hidepayment == "true")
{
    <script>

        $(document).ready(function () {


            $("#rzp-button1").hide()


        })

    </script>


}



@if (ViewBag.PaymentLink == "true")
{
    <script>

        $(document).ready(function () {


            $("#btnpay").on("click", function () { });

            $("#btnpay").click(); //trigger event after listening to it.
        })















    </script>

    ViewBag.PaymentLink = "false";

}


@*end*@


<script>

    $(document).ready(function () {

        $.ajax({

            type: "POST",
            url: "@Url.Action("checkpaymentstatus", "TestatorHomePage")",
            success: function (data) {

            }

        });



    });



</script>



@*FOR COMPLETED DOCUMENT*@

@if (ViewBag.Willbtn == "true")
{
    <script>
        $(document).ready(function () {
            $("#compdocumentbtn1").show();
            $("#documentbtn1").hide();
            $("#title").hide();
        });

    </script>
}

@if (ViewBag.POAbtn == "true")
{
    <script>
        $(document).ready(function () {
            $("#compdocumentbtn2").show();
            $("#documentbtn3").hide();
            $("#title").hide();

        });

    </script>
}


@if (ViewBag.Giftdeedsbtn == "true")
{
    <script>
        $(document).ready(function () {
            $("#compdocumentbtn3").show();
            $("#documentbtn4").hide();
            $("#title").hide();
        });

    </script>
}


@if (ViewBag.LivingWillbtn == "true")
{
    <script>
        $(document).ready(function () {
            $("#compdocumentbtn4").show();
            $("#documentbtn5").hide();
            $("#title").hide();
        });

    </script>
}


@if (ViewBag.Codocilbtn == "true")
{
    <script>
        $(document).ready(function () {
            $("#compdocumentbtn5").show();
            $("#documentbtn2").hide();
            $("#title").hide();
        });

    </script>
}

@*END*@



@*FOR INCOMPLETED DOCUMENT*@


@if (ViewBag.documentbtn1 == "true")
{

    <script>

        $("#documentbtn1").show();

    </script>

}
@if (ViewBag.documentbtn2 == "true")
{

    <script>

        $("#documentbtn2").show();

    </script>

}
@if (ViewBag.documentbtn3 == "true")
{

    <script>

        $("#documentbtn3").show();

    </script>

}
@if (ViewBag.documentbtn4 == "true")
{

    <script>

        $("#documentbtn4").show();

    </script>

}

@if (ViewBag.documentbtn5 == "true")
{

    <script>

        $("#documentbtn5").show();

    </script>

}



@*END*@


@if (ViewBag.Testatorpopup == "true")
{
    <script>

        $(document).ready(function () {
            $("#btnotp").on("click", function () { });

            $("#btnotp").click(); //trigger event after listening to it.

        });
    </script>


}






@if (ViewBag.Message == "Failed")
{
    <script>

        $(document).ready(function () {
            $("#lblerror").html("Invalid OTP Number");

        });
    </script>

}





<script>



            $(".checkone").click(function () {


                if ($(".checkone").is(":checked")) {
                    $("#documentmsg2").hide();
                    $("#documentmsg3").hide();
                     $.ajax({

            type: "POST",
            url:"@Url.Action("checkwilldocument", "TestatorHomePage")",
            success: function (data) {
                var x = $(".checkone").val();
                if (data == "false") {

                    $("#documentmsg1").show();
                    $('.checkone').prop('checked', false);
                }
                else {
                    $("#documentmsg1").hide();
                    $("#documenttype").empty().append(x);
                }


                }
        });







                    $('#DDLAmtPaidBY2').prop('disabled', false);
                }
                else {

                    $('#DDLAmtPaidBY2').prop('disabled', true);
                }



            });




            $(".checktwo").click(function () {
                var x = $(".checktwo").val();
                $("#documentmsg1").hide();
 $.ajax({

            type: "POST",
            url:"@Url.Action("checkcodocildocument", "TestatorHomePage")",
            success: function (data) {

                if (data == "false") {

                    $("#documentmsg2").show();
                    $("#documentmsg3").hide();
                    $('.checktwo').prop('checked', false);
                }
                else {
                    $("#documentmsg2").hide();
                    $("#documenttype").empty().append(x);
                }


                }
        });




            });



            $(".checkthree").click(function () {
                $("#documentmsg2").hide();
                if ($(".checkthree").is(":checked")) {
                    $("#documentmsg1").hide();
                    $("#documentmsg3").hide();
                    var x = $(".checkthree").val();
                    $("#documenttype").append(x);
                    $('#DDLAmtPaidBY2').prop('disabled', false);
                }




            });

            $(".checkfour").click(function () {
                $("#documentmsg2").hide();
                $("#documentmsg1").hide();
                $("#documentmsg3").hide();
                if ($(".checkfour").is(":checked")) {
                    $("#documentmsg1").hide();
                    var x = $(".checkfour").val();
                    $("#documenttype").append(x);
                    $('#DDLAmtPaidBY2').prop('disabled', false);
                }




            });


            $(".checkfive").click(function () {
                $("#documentmsg1").hide();
                $("#documentmsg2").hide();
                var x = $(".checkfive").val();
              $.ajax({

            type: "POST",
            url:"@Url.Action("checklivindocument", "TestatorHomePage")",
            success: function (data) {

                if (data == "false") {

                    $("#documentmsg3").show();
                    $('.checkfive').prop('checked', false);
                }
                else {
                    $("#documentmsg3").hide();
                    $("#documenttype").empty().append(x);
                }


                }
        });




            });







</script>
